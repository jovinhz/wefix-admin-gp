(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06a600cd"],{"036a":function(e,t,a){"use strict";a.d(t,"e",(function(){return o})),a.d(t,"f",(function(){return i})),a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"i",(function(){return l})),a.d(t,"h",(function(){return d})),a.d(t,"d",(function(){return m})),a.d(t,"b",(function(){return u})),a.d(t,"j",(function(){return b})),a.d(t,"g",(function(){return f}));var r=a("997a");const c=new r["a"],o=()=>c.axiosInstance.get("/administrator/categories/"),i=e=>c.axiosInstance.get("/administrator/categories/"+e),n=e=>c.axiosInstance.post("/administrator/categories/",e),s=e=>c.axiosInstance.put("/administrator/categories/"+e,{active:!1}),l=(e,t)=>c.axiosInstance.put("/administrator/categories/"+e,t),d=e=>c.axiosInstance.get(`/administrator/categories/${e}/category_items`),m=(e,t)=>c.axiosInstance.put(`/administrator/categories/${e}/category_items/${t}`,{active:!1}),u=(e,t)=>c.axiosInstance.post(`/administrator/categories/${e}/category_items`,t,{headers:{"Content-Type":"multipart/form-data"}}),b=(e,t,a)=>c.axiosInstance.put(`/administrator/categories/${e}/category_items/${t}`,a,{headers:{"Content-Type":"multipart/form-data"}}),f=async()=>c.axiosInstance.get("/categories")},50911:function(e,t,a){"use strict";a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return n})),a.d(t,"e",(function(){return s})),a.d(t,"a",(function(){return l}));var r=a("997a");const c=new r["a"],o=e=>c.axiosInstance.get("/administrator/offers",{params:e}),i=e=>c.axiosInstance.post("/administrator/offers",e),n=e=>c.axiosInstance.get("/administrator/offers/"+e),s=(e,t)=>c.axiosInstance.put("/administrator/offers/"+e,t),l=e=>c.axiosInstance.post(`/administrator/offers/${e}/cancel`)},ce6e:function(e,t,a){"use strict";a.r(t);var r=a("7a23");const c={class:"content-title d-flex justify-content-between align-items-center"},o=Object(r["createElementVNode"])("h5",null,"Detail Offer",-1),i=Object(r["createElementVNode"])("span",{class:"btn-addon"},[Object(r["createElementVNode"])("i",{class:"btn-addon-icon fe fe-x-circle"})],-1),n=Object(r["createTextVNode"])(" Batal "),s=[i,n],l={class:"row"},d={class:"col-md-6"},m={class:"card"},u=Object(r["createElementVNode"])("div",{class:"card-header card-header-flex"},[Object(r["createElementVNode"])("div",{class:"d-flex align-items-center flex-fill"},[Object(r["createElementVNode"])("h6",{class:"mb-0"},"Data Customer")])],-1),b={class:"card-body"},f={class:"row"},g={class:"col-md-12"},p={class:"row"},h={class:"col-12 mb-2"},O={class:"row"},v={class:"col-12 mb-2"},j={class:"row"},y={class:"col-12 mb-2"},_={class:"row"},N={class:"col-12 mb-2"},V={class:"row"},k={class:"col-12 mb-2"},E={class:"row"},C={class:"col-12 mb-2"},x=["disabled"],S=Object(r["createElementVNode"])("span",{class:"btn-addon"},[Object(r["createElementVNode"])("i",{class:"btn-addon-icon fe fe-send"})],-1),w=Object(r["createTextVNode"])(" Simpan "),I=[S,w],$={class:"col-md-6"},M={class:"card"},P=Object(r["createElementVNode"])("div",{class:"card-header card-header-flex"},[Object(r["createElementVNode"])("div",{class:"d-flex flex-column justify-content-center mr-auto"},[Object(r["createElementVNode"])("h6",{class:"mb-0"},"Informasi Tambahan")])],-1),B={class:"card-body"},D={class:"row mb-3"},T=Object(r["createElementVNode"])("div",{class:"col-4"},[Object(r["createElementVNode"])("span",null,"Status")],-1),F={class:"col-8"},U={class:"text-gray-5"},H={class:"row"},R=Object(r["createElementVNode"])("div",{class:"col-4"},[Object(r["createElementVNode"])("span",null,"Terdaftar pada tanggal")],-1),q={class:"col-8"},A={class:"text-gray-5"};function J(e,t,a,i,n,S){var w,J,K;const z=Object(r["resolveComponent"])("a-input"),G=Object(r["resolveComponent"])("a-form-item"),L=Object(r["resolveComponent"])("a-select"),Q=Object(r["resolveComponent"])("a-input-number"),W=Object(r["resolveComponent"])("a-textarea"),X=Object(r["resolveComponent"])("a-form");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createElementVNode"])("div",c,[o,4!==(null===(w=n.offer)||void 0===w?void 0:w.status_id)?(Object(r["openBlock"])(),Object(r["createElementBlock"])("button",{key:0,class:"btn btn-with-addon btn-danger",onClick:t[0]||(t[0]=(...e)=>S.handleCancelOffer&&S.handleCancelOffer(...e))},s)):Object(r["createCommentVNode"])("",!0)]),Object(r["createElementVNode"])("div",l,[Object(r["createElementVNode"])("div",d,[Object(r["createElementVNode"])("div",m,[u,Object(r["createElementVNode"])("div",b,[Object(r["createElementVNode"])("div",f,[Object(r["createElementVNode"])("div",g,[Object(r["createVNode"])(X,{ref:"formRef",model:i.formState,rules:i.rules,layout:"vertical"},{default:Object(r["withCtx"])(()=>{var e;return[Object(r["createElementVNode"])("div",p,[Object(r["createElementVNode"])("div",h,[Object(r["createVNode"])(G,{ref:"customer_id",label:"Pelanggan",name:"customer_id"},{default:Object(r["withCtx"])(()=>{var e;return[Object(r["createVNode"])(z,{value:null===(e=n.offer)||void 0===e?void 0:e.customer.email,placeholder:"Pilih customer",readonly:"",disabled:""},null,8,["value"])]}),_:1},512)])]),Object(r["createElementVNode"])("div",O,[Object(r["createElementVNode"])("div",v,[Object(r["createElementVNode"])("a",{class:"d-block mb-0 mt-1 text-primary",onClick:t[1]||(t[1]=(...e)=>S.toggleInputCategoryMode&&S.toggleInputCategoryMode(...e))},Object(r["toDisplayString"])(i.useManualInputCategory?"Pilih sub kategori?":"Sub kategori tidak ada?"),1),i.useManualInputCategory?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])(G,{key:0,ref:"category_item_id",name:"category_item_id"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(L,{value:i.formState.category_item_id,"onUpdate:value":t[2]||(t[2]=e=>i.formState.category_item_id=e),options:S.getCategoryOptions,placeholder:"Pilih Sub kategori",class:"text-left w-100"},null,8,["value","options"])]),_:1},512)),i.useManualInputCategory?(Object(r["openBlock"])(),Object(r["createBlock"])(G,{key:1,ref:"category_item_string",name:"category_item_string"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(z,{value:i.formState.category_item_string,"onUpdate:value":t[3]||(t[3]=e=>i.formState.category_item_string=e),class:"w-100",placeholder:"Masukkan nama Sub kategori"},null,8,["value"])]),_:1},512)):Object(r["createCommentVNode"])("",!0)])]),Object(r["createElementVNode"])("div",j,[Object(r["createElementVNode"])("div",y,[Object(r["createVNode"])(G,{ref:"device_type",name:"device_type",label:"Tipe Perangkat"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(z,{value:i.formState.device_type,"onUpdate:value":t[4]||(t[4]=e=>i.formState.device_type=e),placeholder:"Masukkan tipe perangkat"},null,8,["value"])]),_:1},512)])]),Object(r["createElementVNode"])("div",_,[Object(r["createElementVNode"])("div",N,[Object(r["createVNode"])(G,{ref:"price",name:"price",label:"Harga"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(Q,{value:i.formState.price,"onUpdate:value":t[5]||(t[5]=e=>i.formState.price=e),placeholder:"Masukkan harga",min:0,style:{width:"100%"}},null,8,["value"])]),_:1},512)])]),Object(r["createElementVNode"])("div",V,[Object(r["createElementVNode"])("div",k,[Object(r["createVNode"])(G,{ref:"note",name:"note",label:"Catatan"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(W,{value:i.formState.note,"onUpdate:value":t[6]||(t[6]=e=>i.formState.note=e),placeholder:"Masukkan catatan",row:4},null,8,["value"])]),_:1},512)])]),Object(r["createElementVNode"])("div",E,[Object(r["createElementVNode"])("div",C,[Object(r["createElementVNode"])("button",{type:"submit",class:"btn btn-primary btn-with-addon",onClick:t[7]||(t[7]=(...e)=>S.handleFinish&&S.handleFinish(...e)),disabled:n.loadingSubmit||4===(null===(e=n.offer)||void 0===e?void 0:e.status_id)},I,8,x)])])]}),_:1},8,["model","rules"])])])])])]),Object(r["createElementVNode"])("div",$,[Object(r["createElementVNode"])("div",M,[P,Object(r["createElementVNode"])("div",B,[Object(r["createElementVNode"])("div",D,[T,Object(r["createElementVNode"])("div",F,[Object(r["createElementVNode"])("span",U,Object(r["toDisplayString"])(null===(J=n.offer)||void 0===J?void 0:J.status),1)])]),Object(r["createElementVNode"])("div",H,[R,Object(r["createElementVNode"])("div",q,[Object(r["createElementVNode"])("span",A,Object(r["toDisplayString"])(null===(K=n.offer)||void 0===K?void 0:K.created_at),1)])])])])])])])}var K=a("96d9"),z=a("036a"),G=a("50911"),L={props:{id:String},setup(){const e=Object(r["ref"])(!1),t=Object(r["ref"])(),a=Object(r["reactive"])({category_item_id:void 0,category_item_string:void 0,device_type:void 0,note:void 0,price:void 0}),c=async(t,r)=>e.value?a.category_item_string?Promise.resolve():Promise.reject("Kategori tidak boleh kosong"):r?Promise.resolve():Promise.reject("Kategori tidak boleh kosong"),o=async()=>a.price?Promise.resolve():Promise.reject("Harga tidak boleh kosong"),i={category_item_id:[{validator:c,trigger:"change"}],category_item_string:[{validator:c,trigger:"change"}],device_type:[{required:!0,message:"Tipe perangkat tidak boleh kosong",trigger:"change"}],price:[{required:!0,validator:o,trigger:"change"},{type:"number",message:"Harga harus berupa angka",trigger:"change"}]};return{formState:a,formRef:t,rules:i,useManualInputCategory:e}},data(){return{categories:[],offer:null,loadingSubmit:!1}},mounted(){this.fetchData(),this.fetchCategories()},computed:{getCategoryOptions(){return this.categories.map(e=>({label:e.description,options:e.subcategories.map(e=>({value:e.id,label:e.title}))}))}},methods:{async fetchData(){try{const e=await Object(G["c"])(this.$props.id);200===e.status&&(this.offer=e.data,this.fillFields())}catch(e){}},async fetchCategories(){try{const e=await Object(z["g"])();200===e.status&&(this.categories=e.data)}catch(e){}},async submitData(){this.$nprogress.start(),this.loadingSubmit=!0;const e={category_item_id:"",category_item_string:"",device_type:this.formState.device_type,note:this.formState.note,price:this.formState.price};this.useManualInputCategory?(e.category_item_id=0,e.category_item_string=this.formState.category_item_string):e.category_item_id=this.formState.category_item_id;try{const t=await Object(G["e"])(this.$props.id,e);200===t.status&&(this.$notification.success({message:"Sukses",description:"Offer berhasil diperbarui"}),this.offer=t.data,this.fillFields())}catch(t){}this.$nprogress.done(),this.loadingSubmit=!1},async cancelOffer(){this.$nprogress.start();try{const e=await Object(G["a"])(this.$props.id);200===e.status&&(this.$notification.success({message:"Sukses",description:"Offer berhasil dibatalkan"}),this.fetchData())}catch(e){}this.$nprogress.done()},fillFields(){this.formState.category_item_id=this.offer.category_item_id,this.formState.category_item_string=this.offer.category_item_string,this.formState.note=this.offer.note,this.formState.price=parseInt(this.offer.price,10),this.formState.device_type=this.offer.device_type},handleFinish(){this.formRef.validate().then(()=>{this.submitData()}).catch(()=>{})},handleCancelOffer(){this.$modal.confirm({title:()=>"Batal Offer",icon:()=>Object(r["createVNode"])(K["a"]),content:"Apakah Anda yakin untuk membatalkan offer ini?",onOk:()=>{this.cancelOffer()},onCancel:()=>{}})},toggleInputCategoryMode(){this.useManualInputCategory=!this.useManualInputCategory}}},Q=a("d959"),W=a.n(Q);const X=W()(L,[["render",J]]);t["default"]=X}}]);