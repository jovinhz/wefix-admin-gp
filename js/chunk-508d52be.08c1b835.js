(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-508d52be"],{b8cb:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return d})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return i}));var s=a("997a");const o=new s["a"],n=e=>o.axiosInstance.get("/administrator/customers",{params:e}),d=e=>o.axiosInstance.get("/administrator/customers/"+e),c=(e,t)=>o.axiosInstance.put("/administrator/customers/"+e,t),i=e=>o.axiosInstance.get("/administrator/customers/search",{params:{keyword:e}})},fe97:function(e,t,a){"use strict";a.r(t);var s=a("7a23");const o={class:"content-title d-flex justify-content-between align-items-center"},n=Object(s["createElementVNode"])("h5",null,"Detail Customer",-1),d=["disabled"],c=Object(s["createElementVNode"])("span",{class:"btn-addon"},[Object(s["createElementVNode"])("i",{class:"btn-addon-icon fe fe-zap-off"})],-1),i=Object(s["createTextVNode"])(" Suspend "),r=[c,i],l=["disabled"],m=Object(s["createElementVNode"])("span",{class:"btn-addon"},[Object(s["createElementVNode"])("i",{class:"btn-addon-icon fe fe-zap"})],-1),b=Object(s["createTextVNode"])(" Aktifkan "),u=[m,b],p={class:"row"},O={class:"col-md-6"},j={class:"card"},h={class:"card-header card-header-flex"},f={class:"d-flex align-items-center justify-content-between flex-fill"},w=Object(s["createElementVNode"])("h6",{class:"mb-0"},"Data Customer",-1),V=Object(s["createTextVNode"])(" Ganti password "),v={class:"card-body"},N={class:"row"},k={class:"col-md-12"},g={class:"row"},E={class:"col-12 mb-2"},F={class:"row"},y={class:"col-12 mb-2"},_={class:"row"},C={class:"col-12 mb-2"},S={class:"row"},x={class:"col-12 mb-2"},D=["disabled"],R=Object(s["createElementVNode"])("span",{class:"btn-addon"},[Object(s["createElementVNode"])("i",{class:"btn-addon-icon fe fe-send"})],-1),L=Object(s["createTextVNode"])(" Simpan "),$=[R,L],B={class:"col-md-6"},U={class:"card"},P=Object(s["createElementVNode"])("div",{class:"card-header card-header-flex"},[Object(s["createElementVNode"])("div",{class:"d-flex flex-column justify-content-center mr-auto"},[Object(s["createElementVNode"])("h6",{class:"mb-0"},"Informasi Tambahan")])],-1),A={class:"card-body"},T={key:0,class:"row mb-4"},M={class:"col-12"},I={key:1,class:"row mb-3"},q=Object(s["createElementVNode"])("div",{class:"col-4"},[Object(s["createElementVNode"])("span",null,"Alasan Suspend")],-1),G={class:"col-8"},K={class:"row mb-3"},z=Object(s["createElementVNode"])("div",{class:"col-4"},[Object(s["createElementVNode"])("span",null,"Verifikasi Email")],-1),J={class:"col-8"},H=Object(s["createTextVNode"])(" Belum Verifikasi "),Q=Object(s["createTextVNode"])(" Sudah Verifikasi "),W={class:"row"},X=Object(s["createElementVNode"])("div",{class:"col-4"},[Object(s["createElementVNode"])("span",null,"Terdaftar pada tanggal")],-1),Y={class:"col-8"},Z={class:"text-gray-5"},ee={class:"row"},te={class:"col-12"},ae={class:"row"},se={class:"col-12"},oe={class:"row"},ne={class:"col-12"};function de(e,t,a,c,i,m){const b=Object(s["resolveComponent"])("a-button"),R=Object(s["resolveComponent"])("a-input"),L=Object(s["resolveComponent"])("a-form-item"),de=Object(s["resolveComponent"])("a-form"),ce=Object(s["resolveComponent"])("ExclamationCircleOutlined"),ie=Object(s["resolveComponent"])("a-alert"),re=Object(s["resolveComponent"])("a-tag"),le=Object(s["resolveComponent"])("a-input-password"),me=Object(s["resolveComponent"])("a-modal"),be=Object(s["resolveComponent"])("a-textarea");return Object(s["openBlock"])(),Object(s["createElementBlock"])("div",null,[Object(s["createElementVNode"])("div",o,[n,!1===i.additionalData.suspended?(Object(s["openBlock"])(),Object(s["createElementBlock"])("button",{key:0,class:"btn btn-with-addon btn-danger",onClick:t[0]||(t[0]=(...e)=>m.openSuspendForm&&m.openSuspendForm(...e)),disabled:i.suspendLoading},r,8,d)):Object(s["createCommentVNode"])("",!0),!0===i.additionalData.suspended?(Object(s["openBlock"])(),Object(s["createElementBlock"])("button",{key:1,class:"btn btn-with-addon btn-primary",onClick:t[1]||(t[1]=(...e)=>m.handleUnsuspend&&m.handleUnsuspend(...e)),disabled:i.suspendLoading},u,8,l)):Object(s["createCommentVNode"])("",!0)]),Object(s["createElementVNode"])("div",p,[Object(s["createElementVNode"])("div",O,[Object(s["createElementVNode"])("div",j,[Object(s["createElementVNode"])("div",h,[Object(s["createElementVNode"])("div",f,[w,Object(s["createVNode"])(b,{type:"link",onClick:m.openPasswordForm},{default:Object(s["withCtx"])(()=>[V]),_:1},8,["onClick"])])]),Object(s["createElementVNode"])("div",v,[Object(s["createElementVNode"])("div",N,[Object(s["createElementVNode"])("div",k,[Object(s["createVNode"])(de,{ref:"detailFormRef",model:c.detailFormState,rules:c.detailRules,layout:"vertical",onFinish:m.submitUpdateDetail},{default:Object(s["withCtx"])(()=>[Object(s["createElementVNode"])("div",g,[Object(s["createElementVNode"])("div",E,[Object(s["createVNode"])(L,{ref:"full_name",label:"Nama",name:"full_name"},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(R,{value:c.detailFormState.full_name,"onUpdate:value":t[2]||(t[2]=e=>c.detailFormState.full_name=e),placeholder:"Masukkan nama lengkap"},null,8,["value"])]),_:1},512)])]),Object(s["createElementVNode"])("div",F,[Object(s["createElementVNode"])("div",y,[Object(s["createVNode"])(L,{ref:"phone_number",label:"No HP",name:"phone_number"},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(R,{value:c.detailFormState.phone_number,"onUpdate:value":t[3]||(t[3]=e=>c.detailFormState.phone_number=e),placeholder:"Masukkan no hp"},null,8,["value"])]),_:1},512)])]),Object(s["createElementVNode"])("div",_,[Object(s["createElementVNode"])("div",C,[Object(s["createVNode"])(L,{ref:"email",label:"Email",name:"email"},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(R,{value:c.detailFormState.email,"onUpdate:value":t[4]||(t[4]=e=>c.detailFormState.email=e),placeholder:"Masukkan email"},null,8,["value"])]),_:1},512)])]),Object(s["createElementVNode"])("div",S,[Object(s["createElementVNode"])("div",x,[Object(s["createElementVNode"])("button",{type:"submit",class:"btn btn-primary btn-with-addon",disabled:i.detailLoading},$,8,D)])])]),_:1},8,["model","rules","onFinish"])])])])])]),Object(s["createElementVNode"])("div",B,[Object(s["createElementVNode"])("div",U,[P,Object(s["createElementVNode"])("div",A,[!0===i.additionalData.suspended?(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",T,[Object(s["createElementVNode"])("div",M,[Object(s["createVNode"])(ie,{message:"Suspended",description:"Customer ini sedang di-suspend !","show-icon":"",type:"error"},{icon:Object(s["withCtx"])(()=>[Object(s["createVNode"])(ce)]),_:1})])])):Object(s["createCommentVNode"])("",!0),!0===i.additionalData.suspended?(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",I,[q,Object(s["createElementVNode"])("div",G,[Object(s["createElementVNode"])("span",null,Object(s["toDisplayString"])(i.additionalData.suspendedReason),1)])])):Object(s["createCommentVNode"])("",!0),Object(s["createElementVNode"])("div",K,[z,Object(s["createElementVNode"])("div",J,[!1===i.additionalData.verifiedEmail?(Object(s["openBlock"])(),Object(s["createBlock"])(re,{key:0,color:"error"},{default:Object(s["withCtx"])(()=>[H]),_:1})):Object(s["createCommentVNode"])("",!0),!0===i.additionalData.verifiedEmail?(Object(s["openBlock"])(),Object(s["createBlock"])(re,{key:1,color:"success"},{default:Object(s["withCtx"])(()=>[Q]),_:1})):Object(s["createCommentVNode"])("",!0)])]),Object(s["createElementVNode"])("div",W,[X,Object(s["createElementVNode"])("div",Y,[Object(s["createElementVNode"])("span",Z,Object(s["toDisplayString"])(i.additionalData.createdAt),1)])])])])])]),Object(s["createVNode"])(me,{visible:c.passwordFormVisibility,"onUpdate:visible":t[7]||(t[7]=e=>c.passwordFormVisibility=e),title:"Ganti Password","mask-closable":!1,onOk:m.handlePasswordFormFinish,"confirm-loading":i.passwordLoading},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(de,{ref:"passwordFormRef",model:c.passwordFormState,rules:c.passwordRules,layout:"vertical"},{default:Object(s["withCtx"])(()=>[Object(s["createElementVNode"])("div",ee,[Object(s["createElementVNode"])("div",te,[Object(s["createVNode"])(L,{ref:"password",label:"Password",name:"password"},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(le,{value:c.passwordFormState.password,"onUpdate:value":t[5]||(t[5]=e=>c.passwordFormState.password=e),placeholder:"Masukkan password"},null,8,["value"])]),_:1},512)])]),Object(s["createElementVNode"])("div",ae,[Object(s["createElementVNode"])("div",se,[Object(s["createVNode"])(L,{ref:"password_confirmation",label:"Konfirmasi Password",name:"password_confirmation"},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(le,{value:c.passwordFormState.password_confirmation,"onUpdate:value":t[6]||(t[6]=e=>c.passwordFormState.password_confirmation=e),placeholder:"Masukkan password sekali lagi"},null,8,["value"])]),_:1},512)])])]),_:1},8,["model","rules"])]),_:1},8,["visible","onOk","confirm-loading"]),Object(s["createVNode"])(me,{visible:c.suspendFormVisibility,"onUpdate:visible":t[9]||(t[9]=e=>c.suspendFormVisibility=e),title:"Suspend Customer","mask-closable":!1,onOk:m.handleSuspendFormFinish,"confirm-loading":i.suspendLoading},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(de,{ref:"suspendFormRef",model:c.suspendFormState,rules:c.suspendRules,layout:"vertical"},{default:Object(s["withCtx"])(()=>[Object(s["createElementVNode"])("div",oe,[Object(s["createElementVNode"])("div",ne,[Object(s["createVNode"])(L,{ref:"suspended_reason",label:"Alasan melakukan suspend",name:"suspended_reason"},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(be,{value:c.suspendFormState.suspended_reason,"onUpdate:value":t[8]||(t[8]=e=>c.suspendFormState.suspended_reason=e),placeholder:"Masukkan alasan suspend","allow-clear":""},null,8,["value"])]),_:1},512)])])]),_:1},8,["model","rules"])]),_:1},8,["visible","onOk","confirm-loading"])])}var ce=a("b8cb"),ie=a("96d9"),re={props:{id:String},components:{ExclamationCircleOutlined:ie["a"]},setup(){const e=Object(s["ref"])(),t=Object(s["reactive"])({full_name:"",email:"",phone_number:""}),a=Object(s["ref"])(),o=Object(s["reactive"])({password:"",password_confirmation:""}),n=Object(s["ref"])(),d=Object(s["reactive"])({suspended:null,suspended_reason:""}),c=Object(s["ref"])(!1),i=Object(s["ref"])(!1),r=async(e,t)=>""===t?Promise.reject("Konfirmasi password tidak boleh kosong."):t!==o.password?Promise.reject("Password dan Konfirmasi password harus sama."):Promise.resolve(),l={email:[{type:"email",message:"Gunakan email yang valid."}]},m={password:[{required:!0,message:"Password tidak boleh kosong.",trigger:"change"}],password_confirmation:[{required:!0,validator:r,trigger:"change"}]},b={suspended_reason:[{required:!0,message:"Alasan suspend tidak boleh kosong.",trigger:"change"}]};return{detailFormRef:e,detailFormState:t,detailRules:l,passwordFormRef:a,passwordFormState:o,passwordRules:m,suspendFormRef:n,suspendFormState:d,suspendRules:b,passwordFormVisibility:c,suspendFormVisibility:i}},data(){return{detailLoading:!1,passwordLoading:!1,suspendLoading:!1,additionalData:{createdAt:"",suspended:null,suspendedReason:"",verifiedEmail:null}}},mounted(){this.fetchData()},methods:{async fetchData(){try{const e=await Object(ce["a"])(this.$props.id);200===e.status&&(this.detailFormState.email=e.data.email,this.detailFormState.full_name=e.data.full_name,this.detailFormState.phone_number=e.data.phone_number,this.additionalData.createdAt=e.data.created_at,this.additionalData.suspended=e.data.suspended,this.additionalData.suspendedReason=e.data.suspended_reason,this.additionalData.verifiedEmail=e.data.verified_email)}catch(e){}},openSuspendForm(){this.suspendFormVisibility=!0},openPasswordForm(){this.passwordFormVisibility=!0},async handlePasswordFormFinish(){this.passwordLoading=!0,this.$nprogress.start();try{const e=await Object(ce["d"])(this.$props.id,Object(s["toRaw"])(this.passwordFormState));200===e.status&&(this.$notification.success({message:"Sukses",description:"Password berhasil diganti."}),this.passwordFormVisibility=!1,this.passwordFormRef.resetFields())}catch(e){}this.passwordLoading=!1,this.$nprogress.done()},async handleSuspendFormFinish(){this.suspendLoading=!0,this.$nprogress.start();try{const e=await Object(ce["d"])(this.$props.id,{suspended:!0,suspended_reason:this.suspendFormState.suspended_reason});200===e.status&&(this.$notification.success({message:"Sukses",description:"Customer ini telah di suspend."}),this.fetchData(),this.suspendFormVisibility=!1,this.suspendFormRef.resetFields())}catch(e){}this.suspendLoading=!1,this.$nprogress.done()},async submitUpdateDetail(){this.detailLoading=!0,this.$nprogress.start();try{const e=await Object(ce["d"])(this.$props.id,Object(s["toRaw"])(this.detailFormState));200===e.status&&this.$notification.success({message:"Sukses",description:"Customer berhasil diperbarui."})}catch(e){}this.detailLoading=!1,this.$nprogress.done()},async handleUnsuspend(){this.$modal.confirm({title:()=>"Aktifkan Customer",icon:()=>Object(s["createVNode"])(ie["a"]),content:"Apakah Anda yakin untuk mengaktifkan kembali customer ini?",onOk:()=>{this.submitUnsuspend()},onCancel:()=>{}})},async submitUnsuspend(){this.suspendLoading=!0;try{const e=await Object(ce["d"])(this.$props.id,{suspended:!1,suspended_reason:null});200===e.status&&(this.$notification.success({message:"Sukses",description:"Customer berhasil diaktifkan kembali."}),this.fetchData())}catch(e){}this.suspendLoading=!1}}},le=a("d959"),me=a.n(le);const be=me()(re,[["render",de]]);t["default"]=be}}]);