(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-455bff20"],{cf18:function(e,t,a){"use strict";a.r(t);var s=a("7a23");const o=Object(s["createElementVNode"])("div",{class:"content-title"},[Object(s["createElementVNode"])("h5",null,"Detail Staff")],-1),r={class:"row"},c={class:"col-md-6"},i={class:"card"},l={class:"card-header card-header-flex"},d={class:"d-flex align-items-center justify-content-between flex-fill"},n=Object(s["createElementVNode"])("h6",{class:"mb-0"},"Data Staff",-1),m=Object(s["createTextVNode"])(" Ganti password "),b={class:"card-body"},u={class:"row"},f={class:"col-md-12"},j={class:"row"},O={class:"col-12 mb-2"},h={class:"row"},p={class:"col-12 mb-2"},w={class:"row"},v={class:"col-12 mb-2"},V={class:"row"},N={class:"col-12 mb-2"},g=Object(s["createTextVNode"])("Aktif"),_=Object(s["createTextVNode"])("Non Aktif"),E={class:"row"},k={class:"col-12 mb-2"},x=["disabled"],S=Object(s["createElementVNode"])("span",{class:"btn-addon"},[Object(s["createElementVNode"])("i",{class:"btn-addon-icon fe fe-send"})],-1),F=Object(s["createTextVNode"])(" Simpan "),C=[S,F],y={class:"col-md-6"},P={class:"card"},D=Object(s["createElementVNode"])("div",{class:"card-header card-header-flex"},[Object(s["createElementVNode"])("div",{class:"d-flex flex-column justify-content-center mr-auto"},[Object(s["createElementVNode"])("h6",{class:"mb-0"},"Informasi Tambahan")])],-1),R={class:"card-body"},M={class:"row mb-3"},T=Object(s["createElementVNode"])("div",{class:"col-4"},[Object(s["createElementVNode"])("span",null,"Status")],-1),U={class:"col-8"},$=Object(s["createTextVNode"])(" Non Aktif "),A=Object(s["createTextVNode"])(" Aktif "),I={class:"row"},L=Object(s["createElementVNode"])("div",{class:"col-4"},[Object(s["createElementVNode"])("span",null,"Terdaftar pada tanggal")],-1),B={class:"col-8"},q={class:"text-gray-5"},K={class:"row"},G={class:"col-12"},J={class:"row"},H={class:"col-12"};function z(e,t,a,S,F,z){const Q=Object(s["resolveComponent"])("a-button"),W=Object(s["resolveComponent"])("a-input"),X=Object(s["resolveComponent"])("a-form-item"),Y=Object(s["resolveComponent"])("a-select"),Z=Object(s["resolveComponent"])("a-select-option"),ee=Object(s["resolveComponent"])("a-form"),te=Object(s["resolveComponent"])("a-tag"),ae=Object(s["resolveComponent"])("a-input-password"),se=Object(s["resolveComponent"])("a-modal");return Object(s["openBlock"])(),Object(s["createElementBlock"])("div",null,[o,Object(s["createElementVNode"])("div",r,[Object(s["createElementVNode"])("div",c,[Object(s["createElementVNode"])("div",i,[Object(s["createElementVNode"])("div",l,[Object(s["createElementVNode"])("div",d,[n,Object(s["createVNode"])(Q,{type:"link",onClick:z.showPasswordFormModal},{default:Object(s["withCtx"])(()=>[m]),_:1},8,["onClick"])])]),Object(s["createElementVNode"])("div",b,[Object(s["createElementVNode"])("div",u,[Object(s["createElementVNode"])("div",f,[Object(s["createVNode"])(ee,{ref:"formRef",model:S.formState,rules:S.rules,layout:"vertical",onFinish:z.handleFinish},{default:Object(s["withCtx"])(()=>[Object(s["createElementVNode"])("div",j,[Object(s["createElementVNode"])("div",O,[Object(s["createVNode"])(X,{ref:"username",label:"Username",name:"username"},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(W,{value:S.formState.username,"onUpdate:value":t[0]||(t[0]=e=>S.formState.username=e),placeholder:"Masukkan Username"},null,8,["value"])]),_:1},512)])]),Object(s["createElementVNode"])("div",h,[Object(s["createElementVNode"])("div",p,[Object(s["createVNode"])(X,{ref:"full_name",label:"Nama",name:"full_name"},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(W,{value:S.formState.full_name,"onUpdate:value":t[1]||(t[1]=e=>S.formState.full_name=e),placeholder:"Masukkan nama lengkap"},null,8,["value"])]),_:1},512)])]),Object(s["createElementVNode"])("div",w,[Object(s["createElementVNode"])("div",v,[Object(s["createVNode"])(X,{ref:"role_list",label:"Role",name:"role_list"},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(Y,{value:S.formState.role_list,"onUpdate:value":t[2]||(t[2]=e=>S.formState.role_list=e),mode:"multiple",placeholder:"Pilih Role",options:z.roleListData},null,8,["value","options"])]),_:1},512)])]),Object(s["createElementVNode"])("div",V,[Object(s["createElementVNode"])("div",N,[Object(s["createVNode"])(X,{ref:"status_id",label:"Status",name:"status_id"},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(Y,{value:S.formState.status_id,"onUpdate:value":t[3]||(t[3]=e=>S.formState.status_id=e)},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(Z,{value:1},{default:Object(s["withCtx"])(()=>[g]),_:1}),Object(s["createVNode"])(Z,{value:2},{default:Object(s["withCtx"])(()=>[_]),_:1})]),_:1},8,["value"])]),_:1},512)])]),Object(s["createElementVNode"])("div",E,[Object(s["createElementVNode"])("div",k,[Object(s["createElementVNode"])("button",{type:"submit",class:"btn btn-primary btn-with-addon",disabled:F.loading},C,8,x)])])]),_:1},8,["model","rules","onFinish"])])])])])]),Object(s["createElementVNode"])("div",y,[Object(s["createElementVNode"])("div",P,[D,Object(s["createElementVNode"])("div",R,[Object(s["createElementVNode"])("div",M,[T,Object(s["createElementVNode"])("div",U,[2===F.additionalData.status_id?(Object(s["openBlock"])(),Object(s["createBlock"])(te,{key:0,color:"error"},{default:Object(s["withCtx"])(()=>[$]),_:1})):Object(s["createCommentVNode"])("",!0),1===F.additionalData.status_id?(Object(s["openBlock"])(),Object(s["createBlock"])(te,{key:1,color:"success"},{default:Object(s["withCtx"])(()=>[A]),_:1})):Object(s["createCommentVNode"])("",!0)])]),Object(s["createElementVNode"])("div",I,[L,Object(s["createElementVNode"])("div",B,[Object(s["createElementVNode"])("span",q,Object(s["toDisplayString"])(F.additionalData.createdAt),1)])])])])])]),Object(s["createVNode"])(se,{visible:S.passwordFormModalVisibility,"onUpdate:visible":t[6]||(t[6]=e=>S.passwordFormModalVisibility=e),title:"Ganti Password","mask-closable":!1,onOk:z.handlePasswordFormFinish,"confirm-loading":F.loadingPassword},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(ee,{ref:"passwordFormRef",model:S.passwordFormState,rules:S.passwordFormRules,layout:"vertical"},{default:Object(s["withCtx"])(()=>[Object(s["createElementVNode"])("div",K,[Object(s["createElementVNode"])("div",G,[Object(s["createVNode"])(X,{ref:"password",label:"Password",name:"password"},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(ae,{value:S.passwordFormState.password,"onUpdate:value":t[4]||(t[4]=e=>S.passwordFormState.password=e),placeholder:"Masukkan password"},null,8,["value"])]),_:1},512)])]),Object(s["createElementVNode"])("div",J,[Object(s["createElementVNode"])("div",H,[Object(s["createVNode"])(X,{ref:"password_confirmation",label:"Konfirmasi Password",name:"password_confirmation"},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(ae,{value:S.passwordFormState.password_confirmation,"onUpdate:value":t[5]||(t[5]=e=>S.passwordFormState.password_confirmation=e),placeholder:"Masukkan password sekali lagi"},null,8,["value"])]),_:1},512)])])]),_:1},8,["model","rules"])]),_:1},8,["visible","onOk","confirm-loading"])])}var Q=a("f821"),W={props:{id:String},setup(){const e=Object(s["ref"])(),t=Object(s["reactive"])({username:"",full_name:"",role_list:[],status_id:null}),a=Object(s["ref"])(),o=Object(s["reactive"])({password:"",password_confirmation:""}),r=async(e,t)=>t.length?Promise.resolve():Promise.reject("Harus memilih minimal 1 role."),c=async(e,t)=>""===t?Promise.reject("Konfirmasi password tidak boleh kosong."):t!==o.password?Promise.reject("Password dan Konfirmasi password harus sama."):Promise.resolve(),i={username:[{required:!0,message:"Username tidak boleh kosong.",trigger:"change"}],full_name:[{required:!0,message:"Nama tidak boleh kosong.",trigger:"change"}],role_list:[{required:!0,validator:r,trigger:"change"}]},l={password:[{required:!0,message:"Password tidak boleh kosong.",trigger:"change"}],password_confirmation:[{required:!0,validator:c,trigger:"change"}]},d=Object(s["ref"])(!1);return{formRef:e,formState:t,rules:i,passwordFormModalVisibility:d,passwordFormRef:a,passwordFormState:o,passwordFormRules:l}},data(){return{loading:!1,roleList:[],additionalData:{createdAt:"",statusText:"",status_id:null},loadingPassword:!1}},mounted(){this.fetchData(),this.fetchRoleList()},computed:{roleListData(){return this.roleList.map(e=>({value:e}))}},methods:{async fetchData(){try{const e=await Object(Q["d"])(this.$props.id);if(200===e.status){const t=e.data;this.formState.username=t.username,this.formState.full_name=t.full_name,this.formState.role_list=t.roles,this.formState.status_id=t.status_id,this.additionalData.createdAt=t.created_at,this.additionalData.statusText=t.status_caption,this.additionalData.status_id=t.status_id}}catch(e){}},async fetchRoleList(){try{const e=await Object(Q["c"])();200===e.status&&(this.roleList=e.data)}catch(e){}},handleFinish(){this.formRef.validate().then(()=>this.submitData()).catch(()=>{})},async submitData(){this.loading=!0,this.$nprogress.start();try{const e=await Object(Q["f"])(this.$props.id,{...Object(s["toRaw"])(this.formState),role_list:Object(s["toRaw"])(this.formState.role_list.join(", "))});200===e.status&&this.$notification.success({message:"Sukses",description:"Staff berhasil diperbarui."}),this.fetchData()}catch(e){}this.loading=!1,this.$nprogress.done()},showPasswordFormModal(){this.passwordFormModalVisibility=!0},handlePasswordFormFinish(){this.passwordFormRef.validate().then(()=>this.submitChangePasswordForm()).catch(()=>{})},async submitChangePasswordForm(){this.loadingPassword=!0,this.$nprogress.start();try{const e=await Object(Q["f"])(this.$props.id,Object(s["toRaw"])(this.passwordFormState));200===e.status&&(this.$notification.success({message:"Sukses",description:"Password berhasil diubah."}),this.passwordFormModalVisibility=!1,this.passwordFormRef.resetFields())}catch(e){}this.loadingPassword=!1,this.$nprogress.done()}}},X=a("d959"),Y=a.n(X);const Z=Y()(W,[["render",z]]);t["default"]=Z},f821:function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"f",(function(){return d})),a.d(t,"b",(function(){return n}));var s=a("997a");const o=new s["a"],r=()=>o.axiosInstance.get("/administrator/administrators"),c=e=>o.axiosInstance.get("/administrator/administrators/"+e),i=e=>o.axiosInstance.post("/administrator/administrators",e),l=()=>o.axiosInstance.get("/administrator/administrators/roles"),d=(e,t)=>o.axiosInstance.put("/administrator/administrators/"+e,t),n=e=>o.axiosInstance.put("/administrator/administrators/"+e,{status_id:2})}}]);