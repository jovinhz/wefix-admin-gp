(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a63994b0"],{"036a":function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"f",(function(){return c})),a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return n})),a.d(t,"i",(function(){return d})),a.d(t,"h",(function(){return l})),a.d(t,"d",(function(){return u})),a.d(t,"b",(function(){return m})),a.d(t,"j",(function(){return b})),a.d(t,"g",(function(){return g}));var o=a("997a");const r=new o["a"],i=()=>r.axiosInstance.get("/administrator/categories/"),c=e=>r.axiosInstance.get("/administrator/categories/"+e),s=e=>r.axiosInstance.post("/administrator/categories/",e),n=e=>r.axiosInstance.put("/administrator/categories/"+e,{active:!1}),d=(e,t)=>r.axiosInstance.put("/administrator/categories/"+e,t),l=e=>r.axiosInstance.get(`/administrator/categories/${e}/category_items`),u=(e,t)=>r.axiosInstance.put(`/administrator/categories/${e}/category_items/${t}`,{active:!1}),m=(e,t)=>r.axiosInstance.post(`/administrator/categories/${e}/category_items`,t,{headers:{"Content-Type":"multipart/form-data"}}),b=(e,t,a)=>r.axiosInstance.put(`/administrator/categories/${e}/category_items/${t}`,a,{headers:{"Content-Type":"multipart/form-data"}}),g=async()=>r.axiosInstance.get("/categories")},50911:function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return s})),a.d(t,"e",(function(){return n})),a.d(t,"a",(function(){return d}));var o=a("997a");const r=new o["a"],i=e=>r.axiosInstance.get("/administrator/offers",{params:e}),c=e=>r.axiosInstance.post("/administrator/offers",e),s=e=>r.axiosInstance.get("/administrator/offers/"+e),n=(e,t)=>r.axiosInstance.put("/administrator/offers/"+e,t),d=e=>r.axiosInstance.post(`/administrator/offers/${e}/cancel`)},"83c4":function(e,t,a){"use strict";a.r(t);var o=a("7a23");const r=Object(o["createElementVNode"])("div",{class:"content-title"},[Object(o["createElementVNode"])("h5",null,"Buat Offer")],-1),i={class:"card"},c={class:"card-body"},s={class:"row"},n={class:"col-md-6 mb-2"},d={class:"row"},l={class:"col-md-6 mb-2"},u={class:"row"},m={class:"col-md-6 mb-2"},b={class:"row"},g={class:"col-md-6 mb-2"},h={class:"row"},p={class:"col-md-6 mb-2"},f={class:"row"},v={class:"col-md-6 mb-2"},j=["disabled"],O=Object(o["createElementVNode"])("span",{class:"btn-addon"},[Object(o["createElementVNode"])("i",{class:"btn-addon-icon fe fe-send"})],-1),y=Object(o["createTextVNode"])(" Simpan "),_=[O,y],C={class:"mb-4"},k=Object(o["createTextVNode"])(" Sudah Verifikasi "),w=Object(o["createTextVNode"])(" Belum Verifikasi ");function V(e,t,a,O,y,V){const N=Object(o["resolveComponent"])("a-input"),S=Object(o["resolveComponent"])("a-form-item"),x=Object(o["resolveComponent"])("a-select"),I=Object(o["resolveComponent"])("a-input-number"),E=Object(o["resolveComponent"])("a-textarea"),M=Object(o["resolveComponent"])("a-form"),L=Object(o["resolveComponent"])("a-input-search"),B=Object(o["resolveComponent"])("a-tag"),P=Object(o["resolveComponent"])("a-table"),$=Object(o["resolveComponent"])("a-modal");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[r,Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(M,{ref:"formRef",model:O.formState,rules:O.rules,layout:"vertical"},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",i,[Object(o["createElementVNode"])("div",c,[Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("div",n,[Object(o["createVNode"])(S,{ref:"customer_id",label:"Pelanggan",name:"customer_id"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(N,{value:V.selectedCustomer,placeholder:"Pilih customer",readonly:"",onClick:O.openCustomerListModal},null,8,["value","onClick"])]),_:1},512)])]),Object(o["createElementVNode"])("div",d,[Object(o["createElementVNode"])("div",l,[Object(o["createElementVNode"])("a",{class:"d-block mb-0 mt-1 text-primary",onClick:t[0]||(t[0]=(...e)=>V.toggleInputCategoryMode&&V.toggleInputCategoryMode(...e))},Object(o["toDisplayString"])(O.useManualInputCategory?"Pilih sub kategori?":"Sub kategori tidak ada?"),1),O.useManualInputCategory?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(S,{key:0,ref:"category_item_id",name:"category_item_id"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(x,{value:O.formState.category_item_id,"onUpdate:value":t[1]||(t[1]=e=>O.formState.category_item_id=e),options:V.getCategoryOptions,placeholder:"Pilih Sub kategori",class:"text-left w-100"},null,8,["value","options"])]),_:1},512)),O.useManualInputCategory?(Object(o["openBlock"])(),Object(o["createBlock"])(S,{key:1,ref:"category_item_string",name:"category_item_string"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(N,{value:O.formState.category_item_string,"onUpdate:value":t[2]||(t[2]=e=>O.formState.category_item_string=e),class:"w-100",placeholder:"Masukkan nama Sub kategori"},null,8,["value"])]),_:1},512)):Object(o["createCommentVNode"])("",!0)])]),Object(o["createElementVNode"])("div",u,[Object(o["createElementVNode"])("div",m,[Object(o["createVNode"])(S,{ref:"device_type",name:"device_type",label:"Tipe Perangkat"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(N,{value:O.formState.device_type,"onUpdate:value":t[3]||(t[3]=e=>O.formState.device_type=e),placeholder:"Masukkan tipe perangkat"},null,8,["value"])]),_:1},512)])]),Object(o["createElementVNode"])("div",b,[Object(o["createElementVNode"])("div",g,[Object(o["createVNode"])(S,{ref:"price",name:"price",label:"Harga"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(I,{value:O.formState.price,"onUpdate:value":t[4]||(t[4]=e=>O.formState.price=e),placeholder:"Masukkan harga",min:0,style:{width:"100%"}},null,8,["value"])]),_:1},512)])]),Object(o["createElementVNode"])("div",h,[Object(o["createElementVNode"])("div",p,[Object(o["createVNode"])(S,{ref:"note",name:"note",label:"Catatan"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(E,{value:O.formState.note,"onUpdate:value":t[5]||(t[5]=e=>O.formState.note=e),placeholder:"Masukkan catatan",row:4},null,8,["value"])]),_:1},512)])]),Object(o["createElementVNode"])("div",f,[Object(o["createElementVNode"])("div",v,[Object(o["createElementVNode"])("button",{type:"submit",class:"btn btn-primary btn-with-addon",onClick:t[6]||(t[6]=(...e)=>V.handleFinish&&V.handleFinish(...e)),disabled:y.loadingSubmit},_,8,j)])])])])]),_:1},8,["model","rules"])]),Object(o["createVNode"])($,{visible:O.customerListModal,"onUpdate:visible":t[7]||(t[7]=e=>O.customerListModal=e),title:"Pilih Customer",bodyStyle:{maxHeight:"60vh",overflowY:"scroll"},width:V.customerListModalWidth,footer:null},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",C,[Object(o["createVNode"])(L,{placeholder:"Cari email atau nama",onSearch:V.onCustomerSearch,width:"100%"},null,8,["onSearch"])]),Object(o["createVNode"])(P,{columns:O.columns,"data-source":V.customerList,"row-key":e=>e.id,loading:y.customerLoading,"custom-row":O.customRow},{status:Object(o["withCtx"])(({text:e})=>[!0===e?(Object(o["openBlock"])(),Object(o["createBlock"])(B,{key:0,color:"blue"},{default:Object(o["withCtx"])(()=>[k]),_:1})):(Object(o["openBlock"])(),Object(o["createBlock"])(B,{key:1},{default:Object(o["withCtx"])(()=>[w]),_:1}))]),_:1},8,["columns","data-source","row-key","loading","custom-row"])]),_:1},8,["visible","width"])])}a("caad");var N=a("5502"),S=a("b8cb"),x=a("036a"),I=a("50911");const E=[{title:"Email",key:"email",dataIndex:"email"},{title:"Nama",key:"name",dataIndex:"full_name"},{title:"Status",key:"status",dataIndex:"verified_email",slots:{customRender:"status"}}];var M={setup(){const e=Object(N["b"])(),t=Object(o["computed"])(()=>e.getters["Settings/settings"]),a=Object(o["ref"])(""),r=Object(o["ref"])(!1),i=Object(o["ref"])(!1),c=()=>{i.value=!0},s=Object(o["ref"])(),n=Object(o["reactive"])({category_item_id:void 0,category_item_string:void 0,device_type:void 0,note:void 0,price:void 0,customer_id:void 0}),d=async(e,t)=>r.value?n.category_item_string?Promise.resolve():Promise.reject("Kategori tidak boleh kosong"):t?Promise.resolve():Promise.reject("Kategori tidak boleh kosong"),l=async()=>n.price?Promise.resolve():Promise.reject("Harga tidak boleh kosong"),u={customer_id:[{required:!0,message:"Harus pilih customer"}],category_item_id:[{validator:d,trigger:"change"}],category_item_string:[{validator:d,trigger:"change"}],device_type:[{required:!0,message:"Tipe perangkat tidak boleh kosong",trigger:"change"}],price:[{required:!0,validator:l,trigger:"change"},{type:"number",message:"Harga harus berupa angka",trigger:"change"}]},m=e=>({style:{cursor:"pointer"},onClick:()=>{n.customer_id=e.id,i.value=!1,s.value.validate("customer_id")}});return{formState:n,formRef:s,rules:u,useManualInputCategory:r,customerListModal:i,settings:t,customerSearch:a,columns:E,customRow:m,openCustomerListModal:c}},data(){return{customers:[],categories:[],customerLoaded:!1,customerLoading:!1,loadingSubmit:!1}},mounted(){this.fetchCustomers(),this.fetchCategories()},computed:{customerListModalWidth(){return this.settings.isMobileView?"100vw":this.settings.isTabletView?"75vw":"50vw"},customerList(){return this.customers.filter(e=>e.email.toLowerCase().includes(this.customerSearch.toLowerCase())||e.full_name.toLowerCase().includes(this.customerSearch.toLowerCase()))},selectedCustomer(){if(this.formState.customer_id){const e=this.customers.find(e=>e.id===this.formState.customer_id);return e.email}},getCategoryOptions(){return this.categories.map(e=>({label:e.description,options:e.subcategories.map(e=>({value:e.id,label:e.title}))}))}},methods:{async fetchCustomers(){this.customerLoading=!0;try{const e=await Object(S["b"])({limit:1e9});200===e.status&&(this.customers=e.data.data,this.customerLoaded=!0)}catch(e){}this.customerLoading=!1},async fetchCategories(){try{const e=await Object(x["g"])();200===e.status&&(this.categories=e.data)}catch(e){}},onCustomerSearch(e){this.customerSearch=e},toggleInputCategoryMode(){this.useManualInputCategory=!this.useManualInputCategory},async submitData(){this.$nprogress.start(),this.loadingSubmit=!0;const e={category_item_id:"",category_item_string:"",device_type:this.formState.device_type,note:this.formState.note,price:this.formState.price,customer_id:this.formState.customer_id};this.useManualInputCategory?(e.category_item_id=0,e.category_item_string=this.formState.category_item_string):e.category_item_id=this.formState.category_item_id;try{const t=await Object(I["b"])(e);200===t.status&&(this.$notification.success({message:"Sukses",description:"Offer berhasil dibuat"}),this.$router.back())}catch(t){}this.$nprogress.done(),this.loadingSubmit=!1},handleFinish(){this.formRef.validate().then(()=>{this.submitData()}).catch(()=>{})}}},L=a("d959"),B=a.n(L);const P=B()(M,[["render",V]]);t["default"]=P},b8cb:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return c})),a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return n}));var o=a("997a");const r=new o["a"],i=e=>r.axiosInstance.get("/administrator/customers",{params:e}),c=e=>r.axiosInstance.get("/administrator/customers/"+e),s=(e,t)=>r.axiosInstance.put("/administrator/customers/"+e,t),n=e=>r.axiosInstance.get("/administrator/customers/search",{params:{keyword:e}})}}]);