(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c09b457"],{"036a":function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"f",(function(){return s})),a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return n})),a.d(t,"i",(function(){return d})),a.d(t,"h",(function(){return l})),a.d(t,"d",(function(){return u})),a.d(t,"b",(function(){return m})),a.d(t,"j",(function(){return b})),a.d(t,"g",(function(){return g}));var r=a("997a");const o=new r["a"],i=()=>o.axiosInstance.get("/administrator/categories/"),s=e=>o.axiosInstance.get("/administrator/categories/"+e),c=e=>o.axiosInstance.post("/administrator/categories/",e),n=e=>o.axiosInstance.put("/administrator/categories/"+e,{active:!1}),d=(e,t)=>o.axiosInstance.put("/administrator/categories/"+e,t),l=e=>o.axiosInstance.get(`/administrator/categories/${e}/category_items`),u=(e,t)=>o.axiosInstance.put(`/administrator/categories/${e}/category_items/${t}`,{active:!1}),m=(e,t)=>o.axiosInstance.post(`/administrator/categories/${e}/category_items`,t,{headers:{"Content-Type":"multipart/form-data"}}),b=(e,t,a)=>o.axiosInstance.put(`/administrator/categories/${e}/category_items/${t}`,a,{headers:{"Content-Type":"multipart/form-data"}}),g=async()=>o.axiosInstance.get("/categories")},"3f2c":function(e,t,a){"use strict";a.d(t,"h",(function(){return i})),a.d(t,"g",(function(){return c})),a.d(t,"e",(function(){return s})),a.d(t,"b",(function(){return n})),a.d(t,"j",(function(){return l})),a.d(t,"i",(function(){return d})),a.d(t,"d",(function(){return u})),a.d(t,"c",(function(){return m})),a.d(t,"k",(function(){return b})),a.d(t,"a",(function(){return g})),a.d(t,"f",(function(){return h}));var r=a("997a");const o=new r["a"],i=e=>o.axiosInstance.get("/administrator/orders",{params:e}),s=e=>o.axiosInstance.get("/administrator/orders/"+e),c=()=>o.axiosInstance.get("/administrator/orders/statuses"),n=e=>o.axiosInstance.post(`/administrator/orders/${e}/order_logs/customer_care_accept_device`),d=e=>o.axiosInstance.post(`/administrator/orders/${e}/order_logs/technician_accept_job`),l=e=>o.axiosInstance.post(`/administrator/orders/${e}/order_logs/finish_the_service`),u=e=>o.axiosInstance.post(`/administrator/orders/${e}/order_logs/finish_the_order`),m=e=>o.axiosInstance.post(`/administrator/orders/${e}/order_logs/cancel_the_order`),b=(e,t)=>o.axiosInstance.put("/administrator/orders/"+e,t),g=e=>o.axiosInstance.post("/administrator/orders/",e),h=e=>o.axiosInstance.get(`/administrator/orders/${e}/feedbacks`)},b8cb:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return n}));var r=a("997a");const o=new r["a"],i=e=>o.axiosInstance.get("/administrator/customers",{params:e}),s=e=>o.axiosInstance.get("/administrator/customers/"+e),c=(e,t)=>o.axiosInstance.put("/administrator/customers/"+e,t),n=e=>o.axiosInstance.get("/administrator/customers/search",{params:{keyword:e}})},cd3a:function(e,t,a){"use strict";a.r(t);var r=a("7a23");const o=Object(r["createElementVNode"])("div",{class:"content-title"},[Object(r["createElementVNode"])("h5",null,"Buat Order")],-1),i={class:"card"},s={class:"card-body"},c={class:"row"},n={class:"col-md-6 mb-2"},d={class:"row"},l={class:"col-md-6 mb-2"},u={class:"row"},m={class:"col-md-6 mb-2"},b={class:"row"},g={class:"col-md-6 mb-2"},h={class:"row"},p={class:"col-md-6 mb-2"},f={class:"row"},_={class:"col-md-6 mb-2"},v={class:"row"},j={class:"col-md-6 mb-2"},O=["disabled"],y=Object(r["createElementVNode"])("span",{class:"btn-addon"},[Object(r["createElementVNode"])("i",{class:"btn-addon-icon fe fe-send"})],-1),k=Object(r["createTextVNode"])(" Simpan "),C=[y,k],w={class:"mb-4"},V=Object(r["createTextVNode"])(" Sudah Verifikasi "),x=Object(r["createTextVNode"])(" Belum Verifikasi ");function N(e,t,a,y,k,N){const S=Object(r["resolveComponent"])("a-input"),I=Object(r["resolveComponent"])("a-form-item"),E=Object(r["resolveComponent"])("a-select"),M=Object(r["resolveComponent"])("a-input-number"),L=Object(r["resolveComponent"])("a-textarea"),$=Object(r["resolveComponent"])("a-form"),P=Object(r["resolveComponent"])("a-input-search"),B=Object(r["resolveComponent"])("a-tag"),T=Object(r["resolveComponent"])("a-table"),U=Object(r["resolveComponent"])("a-modal");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[o,Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])($,{ref:"formRef",model:y.formState,rules:y.rules,layout:"vertical"},{default:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("div",i,[Object(r["createElementVNode"])("div",s,[Object(r["createElementVNode"])("div",c,[Object(r["createElementVNode"])("div",n,[Object(r["createVNode"])(I,{ref:"customer_id",label:"Pelanggan",name:"customer_id"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(S,{value:N.selectedCustomer,placeholder:"Pilih customer",readonly:"",onClick:y.openCustomerListModal},null,8,["value","onClick"])]),_:1},512)])]),Object(r["createElementVNode"])("div",d,[Object(r["createElementVNode"])("div",l,[Object(r["createElementVNode"])("a",{class:"d-block mb-0 mt-1 text-primary",onClick:t[0]||(t[0]=(...e)=>N.toggleInputCategoryMode&&N.toggleInputCategoryMode(...e))},Object(r["toDisplayString"])(y.useManualInputCategory?"Pilih sub kategori?":"Sub kategori tidak ada?"),1),y.useManualInputCategory?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])(I,{key:0,ref:"category_item_id",name:"category_item_id"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(E,{value:y.formState.category_item_id,"onUpdate:value":t[1]||(t[1]=e=>y.formState.category_item_id=e),options:N.getCategoryOptions,placeholder:"Pilih Sub kategori",class:"text-left w-100"},null,8,["value","options"])]),_:1},512)),y.useManualInputCategory?(Object(r["openBlock"])(),Object(r["createBlock"])(I,{key:1,ref:"category_item_string",name:"category_item_string"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(S,{value:y.formState.category_item_string,"onUpdate:value":t[2]||(t[2]=e=>y.formState.category_item_string=e),class:"w-100",placeholder:"Masukkan nama Sub kategori"},null,8,["value"])]),_:1},512)):Object(r["createCommentVNode"])("",!0)])]),Object(r["createElementVNode"])("div",u,[Object(r["createElementVNode"])("div",m,[Object(r["createVNode"])(I,{ref:"device_type",name:"device_type",label:"Tipe Perangkat"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(S,{value:y.formState.device_type,"onUpdate:value":t[3]||(t[3]=e=>y.formState.device_type=e),placeholder:"Masukkan tipe perangkat"},null,8,["value"])]),_:1},512)])]),Object(r["createElementVNode"])("div",b,[Object(r["createElementVNode"])("div",g,[Object(r["createVNode"])(I,{ref:"device_serial_number",name:"device_serial_number",label:"No Seri Perangkat"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(S,{value:y.formState.device_serial_number,"onUpdate:value":t[4]||(t[4]=e=>y.formState.device_serial_number=e),placeholder:"Masukkan no seri perangkat"},null,8,["value"])]),_:1},512)])]),Object(r["createElementVNode"])("div",h,[Object(r["createElementVNode"])("div",p,[Object(r["createVNode"])(I,{ref:"price",name:"price",label:"Harga"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(M,{value:y.formState.price,"onUpdate:value":t[5]||(t[5]=e=>y.formState.price=e),placeholder:"Masukkan harga",min:0,style:{width:"100%"}},null,8,["value"])]),_:1},512)])]),Object(r["createElementVNode"])("div",f,[Object(r["createElementVNode"])("div",_,[Object(r["createVNode"])(I,{ref:"note",name:"note",label:"Catatan"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(L,{value:y.formState.note,"onUpdate:value":t[6]||(t[6]=e=>y.formState.note=e),placeholder:"Masukkan catatan",row:4},null,8,["value"])]),_:1},512)])]),Object(r["createElementVNode"])("div",v,[Object(r["createElementVNode"])("div",j,[Object(r["createElementVNode"])("button",{type:"submit",class:"btn btn-primary btn-with-addon",onClick:t[7]||(t[7]=(...e)=>N.handleFinish&&N.handleFinish(...e)),disabled:k.loadingSubmit},C,8,O)])])])])]),_:1},8,["model","rules"])]),Object(r["createVNode"])(U,{visible:y.customerListModal,"onUpdate:visible":t[8]||(t[8]=e=>y.customerListModal=e),title:"Pilih Customer",bodyStyle:{maxHeight:"60vh",overflowY:"scroll"},width:N.customerListModalWidth,footer:null},{default:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("div",w,[Object(r["createVNode"])(P,{placeholder:"Cari email atau nama",onSearch:N.onCustomerSearch,width:"100%"},null,8,["onSearch"])]),Object(r["createVNode"])(T,{columns:y.columns,"data-source":N.customerList,"row-key":e=>e.id,loading:k.customerLoading,"custom-row":y.customRow},{status:Object(r["withCtx"])(({text:e})=>[!0===e?(Object(r["openBlock"])(),Object(r["createBlock"])(B,{key:0,color:"blue"},{default:Object(r["withCtx"])(()=>[V]),_:1})):(Object(r["openBlock"])(),Object(r["createBlock"])(B,{key:1},{default:Object(r["withCtx"])(()=>[x]),_:1}))]),_:1},8,["columns","data-source","row-key","loading","custom-row"])]),_:1},8,["visible","width"])])}a("caad");var S=a("5502"),I=a("3f2c"),E=a("b8cb"),M=a("036a");const L=[{title:"Email",key:"email",dataIndex:"email"},{title:"Nama",key:"name",dataIndex:"full_name"},{title:"Status",key:"status",dataIndex:"verified_email",slots:{customRender:"status"}}];var $={setup(){const e=Object(S["b"])(),t=Object(r["computed"])(()=>e.getters["Settings/settings"]),a=Object(r["ref"])(""),o=Object(r["ref"])(!1),i=Object(r["ref"])(!1),s=Object(r["ref"])([]),c=Object(r["ref"])([]),n=()=>{i.value=!0},d=Object(r["ref"])(),l=Object(r["reactive"])({category_item_id:void 0,category_item_string:void 0,device_type:void 0,device_serial_number:void 0,note:void 0,price:void 0,customer_id:null}),u=async(e,t)=>o.value?l.category_item_string?Promise.resolve():Promise.reject("Kategori tidak boleh kosong"):t?Promise.resolve():Promise.reject("Kategori tidak boleh kosong"),m=async()=>l.price?Promise.resolve():Promise.reject("Harga tidak boleh kosong"),b={category_item_id:[{validator:u,trigger:"change"}],category_item_string:[{validator:u,trigger:"change"}],device_type:[{required:!0,message:"Tipe perangkat tidak boleh kosong",trigger:"change"}],device_serial_number:[{required:!0,message:"No seri perangkat tidak boleh kosong",trigger:"change"}],price:[{required:!0,validator:m,trigger:"change"},{type:"number",message:"Harga harus berupa angka",trigger:"change"}]},g=e=>({style:{cursor:"pointer"},onClick:()=>{l.customer_id=e.id,i.value=!1,d.value.validate("customer_id")}});return{formState:l,formRef:d,rules:b,useManualInputCategory:o,customerListModal:i,settings:t,customerSearch:a,categories:c,customers:s,columns:L,openCustomerListModal:n,customRow:g}},data(){return{customerLoaded:!1,customerLoading:!1,loadingSubmit:!1}},mounted(){this.fetchCustomers(),this.fetchCategories()},computed:{customerListModalWidth(){return this.settings.isMobileView?"100vw":this.settings.isTabletView?"75vw":"50vw"},customerList(){return this.customers.filter(e=>e.email.toLowerCase().includes(this.customerSearch)||e.full_name.toLowerCase().includes(this.customerSearch))},selectedCustomer(){if(this.formState.customer_id){const e=this.customers.find(e=>e.id===this.formState.customer_id);return e.email}},getCategoryOptions(){return this.categories.map(e=>({label:e.description,options:e.subcategories.map(e=>({value:e.id,label:e.title}))}))}},methods:{async fetchCustomers(){this.customerLoading=!0;try{const e=await Object(E["b"])({limit:1e9});200===e.status&&(this.customers=e.data.data,this.customerLoaded=!0)}catch(e){}this.customerLoading=!1},async fetchCategories(){try{const e=await Object(M["g"])();200===e.status&&(this.categories=e.data)}catch(e){}},async submitData(){const e={category_item_id:"",category_item_string:"",device_type:this.formState.device_type,device_serial_number:this.formState.device_serial_number,note:this.formState.note,price:this.formState.price,customer_id:this.formState.customer_id};this.useManualInputCategory?(e.category_item_id=0,e.category_item_string=this.formState.category_item_string):e.category_item_id=this.formState.category_item_id,this.$nprogress.start(),this.loadingSubmit=!0;try{const t=await Object(I["a"])(e);200===t.status&&(this.$notification.success({message:"Sukses",description:"Order berhasil dibuat"}),this.$router.back())}catch(t){}this.$nprogress.done(),this.loadingSubmit=!1},toggleInputCategoryMode(){this.useManualInputCategory=!this.useManualInputCategory},handleFinish(){this.formRef.validate().then(()=>{this.submitData()}).catch(()=>{})},onCustomerSearch(e){this.customerSearch=e}}},P=a("6b0d"),B=a.n(P);const T=B()($,[["render",N]]);t["default"]=T}}]);