(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cddce43e"],{"036a":function(e,t,r){"use strict";r.d(t,"e",(function(){return o})),r.d(t,"f",(function(){return i})),r.d(t,"a",(function(){return s})),r.d(t,"c",(function(){return u})),r.d(t,"i",(function(){return l})),r.d(t,"h",(function(){return d})),r.d(t,"d",(function(){return f})),r.d(t,"b",(function(){return m})),r.d(t,"j",(function(){return b})),r.d(t,"g",(function(){return p}));var a=r("1da1"),n=(r("96cf"),r("99af"),r("997a")),c=new n["a"],o=function(){return c.axiosInstance.get("/administrator/categories/")},i=function(e){return c.axiosInstance.get("/administrator/categories/".concat(e))},s=function(e){return c.axiosInstance.post("/administrator/categories/",e)},u=function(e){return c.axiosInstance.put("/administrator/categories/".concat(e),{active:!1})},l=function(e,t){return c.axiosInstance.put("/administrator/categories/".concat(e),t)},d=function(e){return c.axiosInstance.get("/administrator/categories/".concat(e,"/category_items"))},f=function(e,t){return c.axiosInstance.put("/administrator/categories/".concat(e,"/category_items/").concat(t),{active:!1})},m=function(e,t){return c.axiosInstance.post("/administrator/categories/".concat(e,"/category_items"),t,{headers:{"Content-Type":"multipart/form-data"}})},b=function(e,t,r){return c.axiosInstance.put("/administrator/categories/".concat(e,"/category_items/").concat(t),r,{headers:{"Content-Type":"multipart/form-data"}})},p=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",c.axiosInstance.get("/categories"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},50911:function(e,t,r){"use strict";r.d(t,"d",(function(){return c})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"e",(function(){return s})),r.d(t,"a",(function(){return u}));var a=r("997a"),n=new a["a"],c=function(e){return n.axiosInstance.get("/administrator/offers",{params:e})},o=function(e){return n.axiosInstance.post("/administrator/offers",e)},i=function(e){return n.axiosInstance.get("/administrator/offers/".concat(e))},s=function(e,t){return n.axiosInstance.put("/administrator/offers/".concat(e),t)},u=function(e){return n.axiosInstance.post("/administrator/offers/".concat(e,"/cancel"))}},ce6e:function(e,t,r){"use strict";r.r(t);var a=r("7a23"),n={class:"content-title d-flex justify-content-between align-items-center"},c=Object(a["createElementVNode"])("h5",null,"Detail Offer",-1),o=Object(a["createElementVNode"])("span",{class:"btn-addon"},[Object(a["createElementVNode"])("i",{class:"btn-addon-icon fe fe-x-circle"})],-1),i=Object(a["createTextVNode"])(" Batal "),s=[o,i],u={class:"row"},l={class:"col-md-6"},d={class:"card"},f=Object(a["createElementVNode"])("div",{class:"card-header card-header-flex"},[Object(a["createElementVNode"])("div",{class:"d-flex align-items-center flex-fill"},[Object(a["createElementVNode"])("h6",{class:"mb-0"},"Data Customer")])],-1),m={class:"card-body"},b={class:"row"},p={class:"col-md-12"},g={class:"row"},v={class:"col-12 mb-2"},O={class:"row"},h={class:"col-12 mb-2"},j={class:"row"},y={class:"col-12 mb-2"},_={class:"row"},k={class:"col-12 mb-2"},N={class:"row"},V={class:"col-12 mb-2"},x={class:"row"},w={class:"col-12 mb-2"},E=["disabled"],C=Object(a["createElementVNode"])("span",{class:"btn-addon"},[Object(a["createElementVNode"])("i",{class:"btn-addon-icon fe fe-send"})],-1),S=Object(a["createTextVNode"])(" Simpan "),I=[C,S],R={class:"col-md-6"},M={class:"card"},P=Object(a["createElementVNode"])("div",{class:"card-header card-header-flex"},[Object(a["createElementVNode"])("div",{class:"d-flex flex-column justify-content-center mr-auto"},[Object(a["createElementVNode"])("h6",{class:"mb-0"},"Informasi Tambahan")])],-1),B={class:"card-body"},D={class:"row mb-3"},$=Object(a["createElementVNode"])("div",{class:"col-4"},[Object(a["createElementVNode"])("span",null,"Status")],-1),T={class:"col-8"},F={class:"text-gray-5"},U={class:"row"},A=Object(a["createElementVNode"])("div",{class:"col-4"},[Object(a["createElementVNode"])("span",null,"Terdaftar pada tanggal")],-1),H={class:"col-8"},q={class:"text-gray-5"};function J(e,t,r,o,i,C){var S,J,K,z=Object(a["resolveComponent"])("a-input"),G=Object(a["resolveComponent"])("a-form-item"),L=Object(a["resolveComponent"])("a-select"),Q=Object(a["resolveComponent"])("a-input-number"),W=Object(a["resolveComponent"])("a-textarea"),X=Object(a["resolveComponent"])("a-form");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",null,[Object(a["createElementVNode"])("div",n,[c,4!==(null===(S=i.offer)||void 0===S?void 0:S.status_id)?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:0,class:"btn btn-with-addon btn-danger",onClick:t[0]||(t[0]=function(){return C.handleCancelOffer&&C.handleCancelOffer.apply(C,arguments)})},s)):Object(a["createCommentVNode"])("",!0)]),Object(a["createElementVNode"])("div",u,[Object(a["createElementVNode"])("div",l,[Object(a["createElementVNode"])("div",d,[f,Object(a["createElementVNode"])("div",m,[Object(a["createElementVNode"])("div",b,[Object(a["createElementVNode"])("div",p,[Object(a["createVNode"])(X,{ref:"formRef",model:o.formState,rules:o.rules,layout:"vertical"},{default:Object(a["withCtx"])((function(){var e;return[Object(a["createElementVNode"])("div",g,[Object(a["createElementVNode"])("div",v,[Object(a["createVNode"])(G,{ref:"customer_id",label:"Pelanggan",name:"customer_id"},{default:Object(a["withCtx"])((function(){var e;return[Object(a["createVNode"])(z,{value:null===(e=i.offer)||void 0===e?void 0:e.customer.email,placeholder:"Pilih customer",readonly:"",disabled:""},null,8,["value"])]})),_:1},512)])]),Object(a["createElementVNode"])("div",O,[Object(a["createElementVNode"])("div",h,[Object(a["createElementVNode"])("a",{class:"d-block mb-0 mt-1 text-primary",onClick:t[1]||(t[1]=function(){return C.toggleInputCategoryMode&&C.toggleInputCategoryMode.apply(C,arguments)})},Object(a["toDisplayString"])(o.useManualInputCategory?"Pilih sub kategori?":"Sub kategori tidak ada?"),1),o.useManualInputCategory?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])(G,{key:0,ref:"category_item_id",name:"category_item_id"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(L,{value:o.formState.category_item_id,"onUpdate:value":t[2]||(t[2]=function(e){return o.formState.category_item_id=e}),options:C.getCategoryOptions,placeholder:"Pilih Sub kategori",class:"text-left w-100"},null,8,["value","options"])]})),_:1},512)),o.useManualInputCategory?(Object(a["openBlock"])(),Object(a["createBlock"])(G,{key:1,ref:"category_item_string",name:"category_item_string"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(z,{value:o.formState.category_item_string,"onUpdate:value":t[3]||(t[3]=function(e){return o.formState.category_item_string=e}),class:"w-100",placeholder:"Masukkan nama Sub kategori"},null,8,["value"])]})),_:1},512)):Object(a["createCommentVNode"])("",!0)])]),Object(a["createElementVNode"])("div",j,[Object(a["createElementVNode"])("div",y,[Object(a["createVNode"])(G,{ref:"device_type",name:"device_type",label:"Tipe Perangkat"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(z,{value:o.formState.device_type,"onUpdate:value":t[4]||(t[4]=function(e){return o.formState.device_type=e}),placeholder:"Masukkan tipe perangkat"},null,8,["value"])]})),_:1},512)])]),Object(a["createElementVNode"])("div",_,[Object(a["createElementVNode"])("div",k,[Object(a["createVNode"])(G,{ref:"price",name:"price",label:"Harga"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(Q,{value:o.formState.price,"onUpdate:value":t[5]||(t[5]=function(e){return o.formState.price=e}),placeholder:"Masukkan harga",min:0,style:{width:"100%"}},null,8,["value"])]})),_:1},512)])]),Object(a["createElementVNode"])("div",N,[Object(a["createElementVNode"])("div",V,[Object(a["createVNode"])(G,{ref:"note",name:"note",label:"Catatan"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(W,{value:o.formState.note,"onUpdate:value":t[6]||(t[6]=function(e){return o.formState.note=e}),placeholder:"Masukkan catatan",row:4},null,8,["value"])]})),_:1},512)])]),Object(a["createElementVNode"])("div",x,[Object(a["createElementVNode"])("div",w,[Object(a["createElementVNode"])("button",{type:"submit",class:"btn btn-primary btn-with-addon",onClick:t[7]||(t[7]=function(){return C.handleFinish&&C.handleFinish.apply(C,arguments)}),disabled:i.loadingSubmit||4===(null===(e=i.offer)||void 0===e?void 0:e.status_id)},I,8,E)])])]})),_:1},8,["model","rules"])])])])])]),Object(a["createElementVNode"])("div",R,[Object(a["createElementVNode"])("div",M,[P,Object(a["createElementVNode"])("div",B,[Object(a["createElementVNode"])("div",D,[$,Object(a["createElementVNode"])("div",T,[Object(a["createElementVNode"])("span",F,Object(a["toDisplayString"])(null===(J=i.offer)||void 0===J?void 0:J.status),1)])]),Object(a["createElementVNode"])("div",U,[A,Object(a["createElementVNode"])("div",H,[Object(a["createElementVNode"])("span",q,Object(a["toDisplayString"])(null===(K=i.offer)||void 0===K?void 0:K.created_at),1)])])])])])])])}var K=r("1da1"),z=(r("96cf"),r("d3b7"),r("d81d"),r("a4d3"),r("e01a"),r("96d9")),G=r("036a"),L=r("50911"),Q={props:{id:String},setup:function(){var e=Object(a["ref"])(!1),t=Object(a["ref"])(),r=Object(a["reactive"])({category_item_id:void 0,category_item_string:void 0,device_type:void 0,note:void 0,price:void 0}),n=function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(a,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.value){t.next=6;break}if(r.category_item_string){t.next=3;break}return t.abrupt("return",Promise.reject("Kategori tidak boleh kosong"));case 3:return t.abrupt("return",Promise.resolve());case 6:if(n){t.next=8;break}return t.abrupt("return",Promise.reject("Kategori tidak boleh kosong"));case 8:return t.abrupt("return",Promise.resolve());case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),c=function(){var e=Object(K["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.price){e.next=2;break}return e.abrupt("return",Promise.reject("Harga tidak boleh kosong"));case 2:return e.abrupt("return",Promise.resolve());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o={category_item_id:[{validator:n,trigger:"change"}],category_item_string:[{validator:n,trigger:"change"}],device_type:[{required:!0,message:"Tipe perangkat tidak boleh kosong",trigger:"change"}],price:[{required:!0,validator:c,trigger:"change"},{type:"number",message:"Harga harus berupa angka",trigger:"change"}]};return{formState:r,formRef:t,rules:o,useManualInputCategory:e}},data:function(){return{categories:[],offer:null,loadingSubmit:!1}},mounted:function(){this.fetchData(),this.fetchCategories()},computed:{getCategoryOptions:function(){return this.categories.map((function(e){return{label:e.description,options:e.subcategories.map((function(e){return{value:e.id,label:e.title}}))}}))}},methods:{fetchData:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(L["c"])(e.$props.id);case 3:r=t.sent,200===r.status&&(e.offer=r.data,e.fillFields()),t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},fetchCategories:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(G["g"])();case 3:r=t.sent,200===r.status&&(e.categories=r.data),t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},submitData:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$nprogress.start(),e.loadingSubmit=!0,r={category_item_id:"",category_item_string:"",device_type:e.formState.device_type,note:e.formState.note,price:e.formState.price},e.useManualInputCategory?(r.category_item_id=0,r.category_item_string=e.formState.category_item_string):r.category_item_id=e.formState.category_item_id,t.prev=4,t.next=7,Object(L["e"])(e.$props.id,r);case 7:a=t.sent,200===a.status&&(e.$notification.success({message:"Sukses",description:"Offer berhasil diperbarui"}),e.offer=a.data,e.fillFields()),t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](4);case 13:e.$nprogress.done(),e.loadingSubmit=!1;case 15:case"end":return t.stop()}}),t,null,[[4,11]])})))()},cancelOffer:function(){var e=this;return Object(K["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$nprogress.start(),t.prev=1,t.next=4,Object(L["a"])(e.$props.id);case 4:r=t.sent,200===r.status&&(e.$notification.success({message:"Sukses",description:"Offer berhasil dibatalkan"}),e.fetchData()),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](1);case 10:e.$nprogress.done();case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},fillFields:function(){this.formState.category_item_id=this.offer.category_item_id,this.formState.category_item_string=this.offer.category_item_string,this.formState.note=this.offer.note,this.formState.price=parseInt(this.offer.price,10),this.formState.device_type=this.offer.device_type},handleFinish:function(){var e=this;this.formRef.validate().then((function(){e.submitData()})).catch((function(){}))},handleCancelOffer:function(){var e=this;this.$modal.confirm({title:function(){return"Batal Offer"},icon:function(){return Object(a["createVNode"])(z["a"])},content:"Apakah Anda yakin untuk membatalkan offer ini?",onOk:function(){e.cancelOffer()},onCancel:function(){}})},toggleInputCategoryMode:function(){this.useManualInputCategory=!this.useManualInputCategory}}},W=r("6b0d"),X=r.n(W);const Y=X()(Q,[["render",J]]);t["default"]=Y},d81d:function(e,t,r){"use strict";var a=r("23e7"),n=r("b727").map,c=r("1dde"),o=c("map");a({target:"Array",proto:!0,forced:!o},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);